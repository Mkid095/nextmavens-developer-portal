{
  "project": "CLI Tool",
  "branchName": "flow/cli-tool",
  "description": "Standalone CLI tool that provides terminal-based workflows for developers who prefer command-line interfaces over UI. Serious developers don't click UI for everything - CLI is essential for team adoption and CI/CD integration.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Create CLI Project Structure",
      "description": "As a platform engineer, I want to create the CLI project structure so that we have a foundation for adding CLI commands.",
      "acceptanceCriteria": [
        "Node.js project created at /home/ken/nextmavens-cli/",
        "CLI framework configured (oclif or yargs)",
        "package.json with bin entry point",
        "TypeScript configuration",
        "Build scripts configured",
        "Can run `nextmavens --version`",
        "Can run `nextmavens --help`",
        "Typecheck passes"
      ],
      "mavenSteps": [
        1,
        2,
        7,
        10
      ],
      "mcpTools": {
        "step1": [],
        "step2": [],
        "step7": [],
        "step10": []
      },
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Implement Authentication Commands",
      "description": "As a developer, I want to login and logout via CLI so that I can authenticate my terminal session.",
      "acceptanceCriteria": [
        "`nextmavens login` command implemented",
        "Prompts for email and password",
        "Stores access token locally",
        "Token stored in ~/.nextmavens/config.json",
        "`nextmavens logout` command implemented",
        "Logout removes stored token",
        "`nextmavens whoami` shows current user",
        "Typecheck passes"
      ],
      "mavenSteps": [
        1,
        2,
        7,
        10
      ],
      "mcpTools": {
        "step1": [],
        "step2": [],
        "step7": [],
        "step10": []
      },
      "priority": 1,
      "passes": true,
      "notes": "Completed: Implemented login, logout, and whoami commands. Created config management system (src/lib/config.ts) with ~/.nextmavens/config.json storage. Created API client (src/lib/api-client.ts) with authentication and error handling. All commands use password masking for security. Includes exponential backoff on 429 errors. Typecheck passes."
    },
    {
      "id": "US-003",
      "title": "Implement Project Commands",
      "description": "As a developer, I want to create and link projects via CLI so that I can set up projects without using the web UI.",
      "acceptanceCriteria": [
        "`nextmavens project create <name>` command",
        "Creates project via Control Plane API",
        "Returns project details and API keys",
        "`nextmavens project link` command",
        "Links current directory to existing project",
        "Creates .nextmavens/config.json with project_id",
        "`nextmavens project list` command",
        "Lists all projects for authenticated user",
        "Typecheck passes"
      ],
      "mavenSteps": [
        1,
        2,
        7,
        10
      ],
      "mcpTools": {
        "step1": [],
        "step2": [],
        "step7": [],
        "step10": []
      },
      "priority": 1,
      "passes": true,
      "notes": "Completed: Implemented project commands (create, list, link). `nextmavens project create <name>` creates a project via Control Plane API and automatically links it to current directory. `nextmavens project list` lists all projects with linked indicator. `nextmavens project link [id/slug]` links current directory to a project with interactive selection if no ID provided. Local config stored in .nextmavens/config.json with project_id, project_name, and slug. Typecheck passes."
    },
    {
      "id": "US-008",
      "title": "Implement API Client Library",
      "description": "As a CLI developer, I want a reusable API client library so that all CLI commands can communicate with the Control Plane API.",
      "acceptanceCriteria": [
        "API client created at src/lib/api-client.ts",
        "Handles authentication with stored token",
        "Handles request/response formatting",
        "Handles error responses",
        "Retries on 429 with exponential backoff",
        "TypeScript types for all API responses",
        "Typecheck passes"
      ],
      "mavenSteps": [
        1,
        2,
        7,
        10
      ],
      "mcpTools": {
        "step1": [],
        "step2": [],
        "step7": [],
        "step10": []
      },
      "priority": 1,
      "passes": true,
      "notes": "Completed: API client at cli/src/lib/api-client.ts with ApiError class, exponential backoff on 429, TypeScript types (Developer, Project, LoginResponse, ApiResponse, etc.). Integrates with config manager for token storage. Typecheck passes."
    },
    {
      "id": "US-009",
      "title": "Implement Config Management",
      "description": "As a CLI developer, I want config management so that the CLI can store authentication tokens and project links locally.",
      "acceptanceCriteria": [
        "Config stored in ~/.nextmavens/config.json",
        "Config stores: auth_token, default_project_id, api_base_url",
        "Config class with get/set methods",
        "Config directory created if doesn't exist",
        "Config file created with defaults if doesn't exist",
        "Typecheck passes"
      ],
      "mavenSteps": [
        1,
        2,
        7,
        10
      ],
      "mcpTools": {
        "step1": [],
        "step2": [],
        "step7": [],
        "step10": []
      },
      "priority": 1,
      "passes": true,
      "notes": "Completed: ConfigManager class implemented at cli/src/lib/config.ts. Config stored in ~/.nextmavens/config.json. Stores auth_token, default_project_id, api_base_url. Provides get/set/unset/clear methods. Auto-creates config directory and file with defaults. Includes convenience methods: getAuthToken, setAuthToken, clearAuthToken, getApiBaseUrl, setApiBaseUrl. Typecheck passes."
    },
    {
      "id": "US-004",
      "title": "Implement Database Commands",
      "description": "As a developer, I want to push schema changes and run migrations via CLI so that I can manage database schema from the terminal.",
      "acceptanceCriteria": [
        "`nextmavens db push` command",
        "Reads schema from local file",
        "Pushes schema to project database",
        "`nextmavens db diff` command",
        "Shows diff between local and remote schema",
        "`nextmavens db reset` command",
        "Resets database to initial state (dev only)",
        "Typecheck passes"
      ],
      "mavenSteps": [
        1,
        2,
        7,
        10
      ],
      "mcpTools": {
        "step1": [],
        "step2": [],
        "step7": [],
        "step10": []
      },
      "priority": 2,
      "passes": true,
      "notes": "Completed: Implemented db push, db diff, and db reset commands. db push reads schema from local file (schema.sql, schema.prisma, supabase/schema.sql, etc.) and pushes to project database via Control Plane API. db diff shows differences between local and remote schema with formatted output. db reset requires triple confirmation (project name, 'I understand', 'RESET') for safety. All commands check for linked project and authentication. Added DbPushOptions, DbPushResponse, DbDiffOptions, DbDiffResponse, DbResetResponse types to api-client.ts. Typecheck passes."
    },
    {
      "id": "US-005",
      "title": "Implement Functions Commands",
      "description": "As a developer, I want to deploy edge functions via CLI so that I can deploy serverless code from my terminal.",
      "acceptanceCriteria": [
        "`nextmavens functions deploy` command",
        "Deploys functions from /functions directory",
        "Shows deployment progress",
        "`nextmavens functions list` command",
        "Lists deployed functions",
        "`nextmavens functions logs <name>` command",
        "Shows function logs",
        "Typecheck passes"
      ],
      "mavenSteps": [
        1,
        2,
        7,
        10
      ],
      "mcpTools": {
        "step1": [],
        "step2": [],
        "step7": [],
        "step10": []
      },
      "priority": 2,
      "passes": true,
      "notes": "Completed: Implemented functions commands (deploy, list, logs) in cli/src/commands/functions/. deploy command scans functions/ directory for edge functions (supports subdirectories with index.ts/js or single .ts/.js files), deploys all or specific function, shows deployment progress with function_id, URL, version, status. list command displays all deployed functions with details (id, slug, status, url, version, invocation count, last invocation, dates). logs command fetches and displays function logs with filtering (--limit, --since), includes log level symbols, timestamps, messages, and metadata. Added API client methods: deployFunction, listFunctions, getFunctionLogs. Added TypeScript types: FunctionDeployOptions, FunctionDeployResponse, FunctionInfo, FunctionListResponse, FunctionLogsOptions, FunctionLogEntry, FunctionLogsResponse. Updated CLI help text. Typecheck passes."
    },
    {
      "id": "US-006",
      "title": "Implement Secrets Commands",
      "description": "As a developer, I want to manage project secrets via CLI so that I can set environment variables without using the web UI.",
      "acceptanceCriteria": [
        "`nextmavens secrets set <key> <value>` command",
        "Sets secret for linked project",
        "`nextmavens secrets list` command",
        "Lists all secret names (values hidden)",
        "`nextmavens secrets delete <key>` command",
        "Deletes a secret",
        "Typecheck passes"
      ],
      "mavenSteps": [
        1,
        2,
        7,
        10
      ],
      "mcpTools": {
        "step1": [],
        "step2": [],
        "step7": [],
        "step10": []
      },
      "priority": 2,
      "passes": true,
      "notes": "Completed: Implemented secrets commands (set, list, delete) in cli/src/commands/secrets/. set command sets a secret for the linked project with key and value. list command displays all secret names with values hidden (masked as ••••••••••••), includes created/updated dates. delete command removes a secret with confirmation prompt. Added API client methods: setSecret, listSecrets, deleteSecret. Added TypeScript types: SecretInfo, SecretsListResponse, SecretSetResponse, SecretDeleteResponse. Updated CLI help text. Typecheck passes."
    },
    {
      "id": "US-007",
      "title": "Implement Status Command",
      "description": "As a developer, I want to check project status via CLI so that I can see the current state of my project.",
      "acceptanceCriteria": [
        "`nextmavens status` command implemented",
        "Shows linked project information",
        "Shows project status (active, suspended, etc.)",
        "Shows enabled services",
        "Shows current usage metrics",
        "Shows any issues or warnings",
        "Typecheck passes"
      ],
      "mavenSteps": [
        1,
        2,
        7,
        10
      ],
      "mcpTools": {
        "step1": [],
        "step2": [],
        "step7": [],
        "step10": []
      },
      "priority": 2,
      "passes": true,
      "notes": "Completed: Implemented status command (`nextmavens status`) in cli/src/commands/status.ts. Shows linked project information (name, slug, ID, status, tenant ID, created date). Shows enabled services status (database, auth, realtime, storage, functions) with icons. Shows current usage metrics with percentage indicators (DB queries, realtime connections, storage uploads, function invocations). Displays any issues or warnings with timestamps. Includes contextual messages based on project status and approaching limits (75% and 90% thresholds). Added TypeScript types (UsageMetrics, ServiceStatus, Issue, ProjectStatusResponse) and API client method (getProjectStatus). Typecheck passes."
    },
    {
      "id": "US-010",
      "title": "Publish to NPM",
      "description": "As a developer, I want to install the CLI via npm so that I can easily get started.",
      "acceptanceCriteria": [
        "Package published to npm as `nextmavens-cli`",
        "Can install with `npm install -g nextmavens-cli`",
        "Package version follows semantic versioning",
        "Package includes all dependencies",
        "Installation tested on fresh system",
        "README with installation instructions",
        "Typecheck passes"
      ],
      "mavenSteps": [
        9
      ],
      "mcpTools": {
        "step9": []
      },
      "priority": 2,
      "passes": true,
      "notes": "Completed: Configured package.json for npm publishing as 'nextmavens-cli'. Set up build script (cli/build.js) that compiles TypeScript to JavaScript and adds shebang to entry point. Package includes dist/ folder with compiled files, README.md with comprehensive installation and usage instructions, and LICENSE file. Package follows semantic versioning (currently 1.0.0). Set up prepack, prepublishOnly, and prepare scripts to ensure build runs before publishing. Typecheck passes."
    },
    {
      "id": "US-011",
      "title": "Create Documentation",
      "description": "As a developer, I want comprehensive CLI documentation so that I can understand how to use all commands.",
      "acceptanceCriteria": [
        "README with overview and installation",
        "Command reference with examples",
        "Usage guide for common workflows",
        "CONTRIBUTING guide for CLI development",
        "Docs included in npm package",
        "Docs available online",
        "Typecheck passes"
      ],
      "mavenSteps": [
        5
      ],
      "mcpTools": {
        "step5": []
      },
      "priority": 2,
      "passes": false,
      "notes": ""
    }
  ],
  "relatedPRDs": [],
  "consolidatedMemory": "",
  "lessonsLearned": "",
  "memorialFile": "docs/memory/CLI Tool.md"
}